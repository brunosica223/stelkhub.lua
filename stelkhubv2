--[[
    STELK HUB - LEAF WORLD
    Vers√£o: 14.0 - DEFINITIVA
    - GUI 200x200 com bordas circulares
    - Movimento por WalkSpeed (anti-kick)
    - Stars por nome exato "Star"
    - Units do invent√°rio (busca ampla)
    - Detec√ß√£o de mundo por coordenadas e nomes
    - Auto Farm com units atacando
]]

local player = game.Players.LocalPlayer
local runService = game:GetService("RunService")
local tweenService = game:GetService("TweenService")
local userInputService = game:GetService("UserInputService")
local replicatedStorage = game:GetService("ReplicatedStorage")

-- ================ VARI√ÅVEIS ================

local bypassActive = false
local farmActive = false
local selectedMob = nil
local selectedUnit = nil
local currentWorld = "Desconhecido"
local currentWorldColor = Color3.fromRGB(150,150,150)
local inLeafWorld = false
local gems = 0
local gold = 0
local selectedStar = nil
local stars = {}
local mobs = {}
local units = {}
local hubVisible = true
local farmConnection = nil
local worldsDetected = {}

-- ================ CORES ================

local colors = {
    background = Color3.fromRGB(18, 18, 18),
    secondary = Color3.fromRGB(30, 30, 30),
    tertiary = Color3.fromRGB(45, 45, 45),
    accent = Color3.fromRGB(255, 255, 255),
    success = Color3.fromRGB(100, 200, 100),
    danger = Color3.fromRGB(255, 80, 80),
    text = Color3.fromRGB(255, 255, 255),
    textDim = Color3.fromRGB(180, 180, 180),
    selected = Color3.fromRGB(80, 150, 255),
    warning = Color3.fromRGB(255, 200, 100),
    world1 = Color3.fromRGB(100, 200, 100),
    world2 = Color3.fromRGB(200, 100, 100),
    world3 = Color3.fromRGB(100, 100, 200),
    world4 = Color3.fromRGB(200, 200, 100)
}

-- ================ DETEC√á√ÉO DE MUNDO ================

local function detectCurrentWorld()
    local worldNames = {
        {name = "üçÉ Leaf World", keywords = {"leaf", "village", "konoha", "naruto"}, color = colors.world1},
        {name = "üî• Fire World", keywords = {"fire", "fogo", "flame"}, color = colors.world2},
        {name = "üíß Water World", keywords = {"water", "agua", "ocean"}, color = colors.world3},
        {name = "üå™Ô∏è Wind World", keywords = {"wind", "vento", "storm"}, color = colors.world4}
    }
    
    -- Busca por nomes de objetos
    for _, world in ipairs(worldNames) do
        for _, obj in ipairs(workspace:GetDescendants()) do
            local name = obj.Name:lower()
            for _, kw in ipairs(world.keywords) do
                if name:find(kw) then
                    currentWorld = world.name
                    currentWorldColor = world.color
                    inLeafWorld = (world.name == "üçÉ Leaf World")
                    return
                end
            end
        end
    end
    
    -- Se n√£o achou, tenta por coordenadas (exemplo)
    if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
        local pos = player.Character.HumanoidRootPart.Position
        if pos.X > 500 then
            currentWorld = "üçÉ Leaf World"
            currentWorldColor = colors.world1
            inLeafWorld = true
            return
        elseif pos.X < -500 then
            currentWorld = "üî• Fire World"
            currentWorldColor = colors.world2
            inLeafWorld = false
            return
        end
    end
    
    currentWorld = "‚ùì Mundo Desconhecido"
    currentWorldColor = colors.textDim
    inLeafWorld = false
end

-- ================ DETEC√á√ÉO DE GEMS E GOLD ================

local function getGemsAndGold()
    gems = 0; gold = 0
    if player:FindFirstChild("leaderstats") then
        for _, child in ipairs(player.leaderstats:GetChildren()) do
            local name = child.Name:lower()
            if name:find("gem") then gems = child.Value or 0 end
            if name:find("gold") or name:find("coin") then gold = child.Value or 0 end
        end
    end
    for _, obj in ipairs(player:GetChildren()) do
        if obj:IsA("NumberValue") then
            if obj.Name:lower():find("gem") then gems = obj.Value end
            if obj.Name:lower():find("gold") then gold = obj.Value end
        end
    end
    return gems, gold
end

-- ================ SISTEMA DE STARS ================

local function findStars()
    local found = {}
    print("üîç Procurando Stars...")
    local exactNames = {"Star", "Gacha", "Spin", "Wheel"}
    for _, obj in ipairs(workspace:GetDescendants()) do
        for _, name in ipairs(exactNames) do
            if obj.Name == name then
                if obj:IsA("BasePart") or obj:IsA("Model") then
                    print("‚úÖ Encontrado: " .. obj.Name)
                    table.insert(found, obj)
                end
            end
        end
        if obj:IsA("ClickDetector") and obj.Parent then
            for _, name in ipairs(exactNames) do
                if obj.Parent.Name == name then
                    print("‚úÖ ClickDetector em: " .. obj.Parent.Name)
                    table.insert(found, obj.Parent)
                end
            end
        end
        if #found >= 6 then break end
    end
    print("üîç Total: " .. #found)
    return found
end

local function spinStar(star)
    if not star then return false end
    local detector = star:FindFirstChildOfClass("ClickDetector")
    if detector then fireclickdetector(detector); return true end
    local prompt = star:FindFirstChildOfClass("ProximityPrompt")
    if prompt then prompt:InputHoldBegin(); task.wait(0.1); prompt:InputHoldEnd(); return true end
    return false
end

-- ================ SISTEMA DE MOBS ================

local function findMobs()
    local found = {}
    for _, obj in ipairs(workspace:GetDescendants()) do
        if obj:IsA("Model") and obj:FindFirstChildOfClass("Humanoid") then
            local humanoid = obj:FindFirstChildOfClass("Humanoid")
            if humanoid and humanoid.Health > 0 and obj ~= player.Character then
                local isBoss = (humanoid.MaxHealth > 50000 or obj.Name:lower():find("boss"))
                table.insert(found, {
                    Object = obj,
                    Name = obj.Name,
                    Health = humanoid.Health,
                    MaxHealth = humanoid.MaxHealth,
                    IsBoss = isBoss
                })
            end
        end
    end
    return found
end

-- ================ SISTEMA DE UNITS ================

local function findUnits()
    local found = {}
    local folders = {
        player:FindFirstChild("Units"),
        player:FindFirstChild("Pets"),
        player:FindFirstChild("Inventory"),
        player:FindFirstChild("Backpack"),
        player:FindFirstChild("StarterGear"),
        player:FindFirstChild("PlayerGui"),
        replicatedStorage
    }
    local function getDamage(obj)
        for _, prop in ipairs({"Damage", "Power", "Atk", "Attack", "Dano"}) do
            local val = obj:FindFirstChild(prop)
            if val and val:IsA("NumberValue") then return val.Value end
        end
        return 0
    end
    for _, folder in ipairs(folders) do
        if folder then
            for _, child in ipairs(folder:GetChildren()) do
                if child:IsA("Model") then
                    local damage = getDamage(child)
                    local hasHumanoid = child:FindFirstChildOfClass("Humanoid") ~= nil
                    if damage > 0 or hasHumanoid then
                        table.insert(found, {Name = child.Name, Damage = damage, Object = child, HasHumanoid = hasHumanoid})
                    end
                end
            end
        end
    end
    if #found == 0 then
        for _, child in ipairs(player:GetChildren()) do
            if child:IsA("Model") then
                local damage = getDamage(child)
                if damage > 0 or child:FindFirstChildOfClass("Humanoid") then
                    table.insert(found, {Name = child.Name, Damage = damage, Object = child, HasHumanoid = child:FindFirstChildOfClass("Humanoid") ~= nil})
                end
            end
        end
    end
    table.sort(found, function(a, b) return a.Damage > b.Damage end)
    return found
end

-- ================ MOVIMENTO SEM TWEEN ================

local function moveToMob(mob)
    if not mob then return end
    local root = mob:FindFirstChild("HumanoidRootPart") or mob:FindFirstChild("Torso") or mob:FindFirstChild("UpperTorso")
    if not root then return end
    local char = player.Character
    if not char then return end
    local humanoid = char:FindFirstChildOfClass("Humanoid")
    local charRoot = char:FindFirstChild("HumanoidRootPart")
    if not humanoid or not charRoot then return end
    
    local targetPos = root.Position + Vector3.new(0, 5, 0)
    local distance = (targetPos - charRoot.Position).Magnitude
    if distance < 10 then return end
    
    local originalSpeed = humanoid.WalkSpeed
    humanoid.WalkSpeed = 120  -- Velocidade alta mas ainda natural
    humanoid:MoveTo(targetPos)
    
    local timeout = tick() + 5 + distance / 60
    while (charRoot.Position - targetPos).Magnitude > 5 and tick() < timeout do
        humanoid:MoveTo(targetPos)
        task.wait(0.1)
    end
    humanoid.WalkSpeed = originalSpeed
end

-- ================ COMANDOS PARA UNITS ATACAREM ================

local function commandUnitsToAttack(target)
    if not target then return end
    for _, unit in ipairs(units) do
        if unit.Object and unit.Object.Parent then
            local attackRemote = unit.Object:FindFirstChild("Attack") or unit.Object:FindFirstChild("Skill") or unit.Object:FindFirstChild("Combat")
            if attackRemote and attackRemote:IsA("RemoteEvent") then
                attackRemote:FireServer(target)
            end
            if unit.HasHumanoid then
                local humanoid = unit.Object:FindFirstChildOfClass("Humanoid")
                if humanoid then
                    local targetValue = unit.Object:FindFirstChild("Target")
                    if targetValue and targetValue:IsA("ObjectValue") then
                        targetValue.Value = target
                    end
                end
            end
        end
    end
end

-- ================ FARM AUTOM√ÅTICO ================

local function startFarming()
    if not selectedMob then print("‚ùå Selecione um mob"); return end
    farmActive = true
    print("‚öîÔ∏è Farm iniciado para: " .. selectedMob.Name)
    farmConnection = task.spawn(function()
        while farmActive do
            mobs = findMobs()
            local currentMob = nil
            for _, mob in ipairs(mobs) do
                if mob.Name == selectedMob.Name then
                    currentMob = mob
                    break
                end
            end
            if not currentMob then
                print("‚è≥ Mob morto, aguardando respawn...")
                task.wait(5)
            else
                units = findUnits()
                if currentMob.IsBoss then
                    print("‚ö†Ô∏è Boss detectado - atacando de longe")
                    commandUnitsToAttack(currentMob.Object)
                    task.wait(2)
                else
                    moveToMob(currentMob.Object)
                    commandUnitsToAttack(currentMob.Object)
                    local humanoid = currentMob.Object:FindFirstChildOfClass("Humanoid")
                    if humanoid and humanoid.Health <= 0 then
                        print("üí∞ Mob morto!")
                    end
                end
            end
            task.wait(1)
        end
    end)
end

local function stopFarming()
    farmActive = false
    if farmConnection then farmConnection = nil end
    print("‚èπÔ∏è Farm parado")
end

-- ================ EQUIPAR MELHOR UNIT ================

local function equipBestUnit()
    units = findUnits()
    if #units == 0 then print("‚ùå Nenhuma unit"); return end
    local best = units[1]
    print("‚úÖ Melhor unit: " .. best.Name .. " (Dano: " .. best.Damage .. ")")
    if best.Object then
        local remote = player:FindFirstChild("EquipUnit") or player:FindFirstChild("SelectUnit") or replicatedStorage:FindFirstChild("EquipUnit")
        if remote and remote:IsA("RemoteEvent") then remote:FireServer(best.Object) end
        if player.Character then best.Object.Parent = player.Character end
    end
end

-- ================ BYPASS ================

local function toggleBypass()
    if bypassActive then bypassActive = false; return end
    bypassActive = true
    pcall(function()
        local mt = getrawmetatable and getrawmetatable(game) or getmetatable(game)
        if mt then
            local oldNamecall = mt.__namecall
            setreadonly(mt, false)
            mt.__namecall = newcclosure(function(self, ...)
                local method = getnamecallmethod()
                if method == "FireServer" and tostring(self):lower():find("anticheat") then return end
                return oldNamecall(self, ...)
            end)
            setreadonly(mt, true)
        end
    end)
end

-- ================ GUI ================

local screenGui = Instance.new("ScreenGui")
screenGui.Name = "StelkHub"
screenGui.Parent = player:WaitForChild("PlayerGui")
screenGui.ResetOnSpawn = false
screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- Bot√£o toggle
local toggleBtn = Instance.new("TextButton")
toggleBtn.Parent = screenGui
toggleBtn.BackgroundColor3 = colors.accent
toggleBtn.Size = UDim2.new(0, 30, 0, 30)
toggleBtn.Position = UDim2.new(0, 10, 0, 10)
toggleBtn.Text = "‚â°"
toggleBtn.TextColor3 = colors.background
toggleBtn.Font = Enum.Font.GothamBold
toggleBtn.TextSize = 20
toggleBtn.BorderSizePixel = 0
local toggleCorner = Instance.new("UICorner"); toggleCorner.CornerRadius = UDim.new(0, 8); toggleCorner.Parent = toggleBtn

-- Frame principal 200x200
local mainFrame = Instance.new("Frame")
mainFrame.Parent = screenGui
mainFrame.BackgroundColor3 = colors.background
mainFrame.BorderSizePixel = 0
mainFrame.Size = UDim2.new(0, 200, 0, 200)
mainFrame.Position = UDim2.new(0.5, -100, 0.5, -100)
mainFrame.Active = true
mainFrame.Draggable = true
mainFrame.Visible = true
local mainCorner = Instance.new("UICorner"); mainCorner.CornerRadius = UDim.new(0, 15); mainCorner.Parent = mainFrame

-- Top Bar
local topBar = Instance.new("Frame")
topBar.Parent = mainFrame
topBar.BackgroundColor3 = colors.secondary
topBar.Size = UDim2.new(1, 0, 0, 30)
topBar.BorderSizePixel = 0
local topCorner = Instance.new("UICorner"); topCorner.CornerRadius = UDim.new(0, 10); topCorner.Parent = topBar

local title = Instance.new("TextLabel")
title.Parent = topBar
title.BackgroundTransparency = 1
title.Size = UDim2.new(0, 120, 1, 0)
title.Position = UDim2.new(0, 8, 0, 0)
title.Text = "STELK"
title.TextColor3 = colors.accent
title.Font = Enum.Font.GothamBold
title.TextSize = 14
title.TextXAlignment = Enum.TextXAlignment.Left

local closeBtn = Instance.new("TextButton")
closeBtn.Parent = topBar
closeBtn.BackgroundColor3 = colors.danger
closeBtn.Size = UDim2.new(0, 20, 0, 20)
closeBtn.Position = UDim2.new(1, -25, 0.5, -10)
closeBtn.Text = "‚úï"
closeBtn.TextColor3 = colors.text
closeBtn.Font = Enum.Font.GothamBold
closeBtn.TextSize = 12
closeBtn.BorderSizePixel = 0
local closeCorner = Instance.new("UICorner"); closeCorner.CornerRadius = UDim.new(0, 5); closeCorner.Parent = closeBtn
closeBtn.MouseButton1Click:Connect(function() if farmActive then stopFarming() end screenGui:Destroy() end)

-- Abas rol√°veis (container pequeno)
local tabContainer = Instance.new("Frame")
tabContainer.Parent = mainFrame
tabContainer.BackgroundColor3 = colors.secondary
tabContainer.Size = UDim2.new(1, 0, 0, 30)
tabContainer.Position = UDim2.new(0, 0, 0, 30)
tabContainer.ClipsDescendants = true

local tabScrolling = Instance.new("ScrollingFrame")
tabScrolling.Parent = tabContainer
tabScrolling.BackgroundTransparency = 1
tabScrolling.Size = UDim2.new(1, 0, 1, 0)
tabScrolling.CanvasSize = UDim2.new(3, 0, 0, 0)
tabScrolling.ScrollBarThickness = 0
tabScrolling.BorderSizePixel = 0

local function createTab(name, pos)
    local btn = Instance.new("TextButton")
    btn.Parent = tabScrolling
    btn.BackgroundColor3 = colors.background
    btn.Size = UDim2.new(0, 45, 0, 22)
    btn.Position = UDim2.new(0, pos, 0.5, -11)
    btn.Text = name
    btn.TextColor3 = colors.textDim
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 10
    btn.AutoButtonColor = false
    btn.BorderSizePixel = 0
    local btnCorner = Instance.new("UICorner"); btnCorner.CornerRadius = UDim.new(0, 5); btnCorner.Parent = btn
    return btn
end

local tab1 = createTab("MUNDO", 5)
local tab2 = createTab("STARS", 55)
local tab3 = createTab("MOBS", 105)
local tab4 = createTab("UNITS", 155)
local tab5 = createTab("FARM", 205)

local pageIndicator = Instance.new("Frame")
pageIndicator.Parent = tabScrolling
pageIndicator.BackgroundColor3 = colors.accent
pageIndicator.Size = UDim2.new(0, 30, 0, 2)
pageIndicator.Position = UDim2.new(0, 10, 1, -4)
pageIndicator.BorderSizePixel = 0

-- Conte√∫do (agora um frame simples, pois o tamanho √© pequeno)
local content = Instance.new("Frame")
content.Parent = mainFrame
content.BackgroundColor3 = colors.background
content.Size = UDim2.new(1, -10, 1, -70)
content.Position = UDim2.new(0, 5, 0, 65)
content.BorderSizePixel = 0
content.ClipsDescendants = true
local contentCorner = Instance.new("UICorner"); contentCorner.CornerRadius = UDim.new(0, 8); contentCorner.Parent = content

-- P√°ginas (cada uma com elementos reduzidos)
local page1 = Instance.new("Frame"); page1.Parent = content; page1.BackgroundTransparency = 1; page1.Size = UDim2.new(1,0,1,0); page1.Visible = true
local page2 = Instance.new("Frame"); page2.Parent = content; page2.BackgroundTransparency = 1; page2.Size = UDim2.new(1,0,1,0); page2.Visible = false
local page3 = Instance.new("Frame"); page3.Parent = content; page3.BackgroundTransparency = 1; page3.Size = UDim2.new(1,0,1,0); page3.Visible = false
local page4 = Instance.new("Frame"); page4.Parent = content; page4.BackgroundTransparency = 1; page4.Size = UDim2.new(1,0,1,0); page4.Visible = false
local page5 = Instance.new("Frame"); page5.Parent = content; page5.BackgroundTransparency = 1; page5.Size = UDim2.new(1,0,1,0); page5.Visible = false

-- P√°gina 1: MUNDO (simplificada)
local worldNameLabel = Instance.new("TextLabel"); worldNameLabel.Parent = page1; worldNameLabel.BackgroundTransparency = 1; worldNameLabel.Size = UDim2.new(1,0,0,20); worldNameLabel.Position = UDim2.new(0,5,0,5); worldNameLabel.Text = "Detectando..."; worldNameLabel.TextColor3 = colors.accent; worldNameLabel.Font = Enum.Font.GothamBold; worldNameLabel.TextSize = 12
local worldStatusLabel = Instance.new("TextLabel"); worldStatusLabel.Parent = page1; worldStatusLabel.BackgroundTransparency = 1; worldStatusLabel.Size = UDim2.new(1,0,0,15); worldStatusLabel.Position = UDim2.new(0,5,0,25); worldStatusLabel.Text = ""; worldStatusLabel.TextColor3 = colors.textDim; worldStatusLabel.Font = Enum.Font.Gotham; worldStatusLabel.TextSize = 10
local gemsLabel = Instance.new("TextLabel"); gemsLabel.Parent = page1; gemsLabel.BackgroundTransparency = 1; gemsLabel.Size = UDim2.new(0,80,0,15); gemsLabel.Position = UDim2.new(0,5,0,45); gemsLabel.Text = "üíé 0"; gemsLabel.TextColor3 = colors.accent; gemsLabel.Font = Enum.Font.GothamBold; gemsLabel.TextSize = 11
local goldLabel = Instance.new("TextLabel"); goldLabel.Parent = page1; goldLabel.BackgroundTransparency = 1; goldLabel.Size = UDim2.new(0,80,0,15); goldLabel.Position = UDim2.new(0,90,0,45); goldLabel.Text = "ü™ô 0"; goldLabel.TextColor3 = colors.accent; goldLabel.Font = Enum.Font.GothamBold; goldLabel.TextSize = 11

-- P√°gina 2: STARS (simplificada)

starsList.TextXAlignment = Enum.TextXAlignment.Left
starsList.TextYAlignment = Enum.TextYAlignment.Top
local starsCorner = Instance.new("UICorner"); starsCorner.CornerRadius = UDim.new(0,5); starsCorner.Parent = starsList

local refreshStarsBtn = Instance.new("TextButton")
refreshStarsBtn.Parent = page2
refreshStarsBtn.BackgroundColor3 = colors.tertiary
refreshStarsBtn.Size = UDim2.new(0,50,0,18)
refreshStarsBtn.Position = UDim2.new(0,5,0,90)
refreshStarsBtn.Text = "üîÑ"
refreshStarsBtn.TextColor3 = colors.text
refreshStarsBtn.Font = Enum.Font.GothamBold
refreshStarsBtn.TextSize = 10

local spinBtn = Instance.new("TextButton")
spinBtn.Parent = page2
spinBtn.BackgroundColor3 = colors.tertiary
spinBtn.Size = UDim2.new(0,50,0,18)
spinBtn.Position = UDim2.new(0,60,0,90)
spinBtn.Text = "üéØ"
spinBtn.TextColor3 = colors.text
spinBtn.Font = Enum.Font.GothamBold
spinBtn.TextSize = 10

-- P√°gina 3: MOBS (simplificada)
local mobsScrolling = Instance.new("ScrollingFrame")
mobsScrolling.Parent = page3
mobsScrolling.BackgroundColor3 = colors.secondary
mobsScrolling.Size = UDim2.new(1,-10,0,100)
mobsScrolling.Position = UDim2.new(0,5,0,5)
mobsScrolling.CanvasSize = UDim2.new(0,0,2,0)
mobsScrolling.ScrollBarThickness = 4

local mobsCorner = Instance.new("UICorner")
mobsCorner.CornerRadius = UDim.new(0,5)
mobsCorner.Parent = mobsScrolling

local selectedMobText = Instance.new("TextLabel")
selectedMobText.Parent = page3
selectedMobText.BackgroundColor3 = colors.tertiary
selectedMobText.Size = UDim2.new(1,-10,0,20)
selectedMobText.Position = UDim2.new(0,5,0,110)
selectedMobText.Text = "Nenhum"
selectedMobText.TextColor3 = colors.textDim
selectedMobText.Font = Enum.Font.Gotham
selectedMobText.TextSize = 9
selectedMobText.TextXAlignment = Enum.TextXAlignment.Left

local refreshMobsBtn = Instance.new("TextButton")
refreshMobsBtn.Parent = page3
refreshMobsBtn.BackgroundColor3 = colors.tertiary
refreshMobsBtn.Size = UDim2.new(0,80,0,18)
refreshMobsBtn.Position = UDim2.new(0.5,-40,0,135)
refreshMobsBtn.Text = "ATUALIZAR"
refreshMobsBtn.TextColor3 = colors.text
refreshMobsBtn.Font = Enum.Font.GothamBold
refreshMobsBtn.TextSize = 8

-- P√°gina 4: UNITS (simplificada)
local unitsScrolling = Instance.new("ScrollingFrame")
unitsScrolling.Parent = page4
unitsScrolling.BackgroundColor3 = colors.secondary
unitsScrolling.Size = UDim2.new(1,-10,0,100)
unitsScrolling.Position = UDim2.new(0,5,0,5)
unitsScrolling.CanvasSize = UDim2.new(0,0,2,0)
unitsScrolling.ScrollBarThickness = 4

local unitsCorner = Instance.new("UICorner")
unitsCorner.CornerRadius = UDim.new(0,5)
unitsCorner.Parent = unitsScrolling

local equipBestBtn = Instance.new("TextButton")
equipBestBtn.Parent = page4
equipBestBtn.BackgroundColor3 = colors.success
equipBestBtn.Size = UDim2.new(0,80,0,18)
equipBestBtn.Position = UDim2.new(0.5,-40,0,110)
equipBestBtn.Text = "EQUIP BEST"
equipBestBtn.TextColor3 = colors.background
equipBestBtn.Font = Enum.Font.GothamBold
equipBestBtn.TextSize = 8

local refreshUnitsBtn = Instance.new("TextButton")
refreshUnitsBtn.Parent = page4
refreshUnitsBtn.BackgroundColor3 = colors.tertiary
refreshUnitsBtn.Size = UDim2.new(0,80,0,18)
refreshUnitsBtn.Position = UDim2.new(0.5,-40,0,133)
refreshUnitsBtn.Text = "ATUALIZAR"
refreshUnitsBtn.TextColor3 = colors.text
refreshUnitsBtn.Font = Enum.Font.GothamBold
refreshUnitsBtn.TextSize = 8

-- P√°gina 5: FARM (simplificada)
local farmInfo = Instance.new("TextLabel")
farmInfo.Parent = page5
farmInfo.BackgroundTransparency = 1
farmInfo.Size = UDim2.new(1,0,0,15)
farmInfo.Position = UDim2.new(0,5,0,5)
farmInfo.Text = "Mob: Nenhum"
farmInfo.TextColor3 = colors.textDim
farmInfo.Font = Enum.Font.Gotham
farmInfo.TextSize = 9

local farmStatus = Instance.new("TextLabel")
farmStatus.Parent = page5
farmStatus.BackgroundTransparency = 1
farmStatus.Size = UDim2.new(1,0,0,15)
farmStatus.Position = UDim2.new(0,5,0,20)
farmStatus.Text = "Status: Parado"
farmStatus.TextColor3 = colors.textDim
farmStatus.Font = Enum.Font.Gotham
farmStatus.TextSize = 9

local farmBtn = Instance.new("TextButton")
farmBtn.Parent = page5
farmBtn.BackgroundColor3 = colors.tertiary
farmBtn.Size = UDim2.new(0,80,0,20)
farmBtn.Position = UDim2.new(0.5,-40,0,40)
farmBtn.Text = "‚ñ∂Ô∏è INICIAR"
farmBtn.TextColor3 = colors.text
farmBtn.Font = Enum.Font.GothamBold
farmBtn.TextSize = 9

local bypassBtn = Instance.new("TextButton")
bypassBtn.Parent = page5
bypassBtn.BackgroundColor3 = colors.tertiary
bypassBtn.Size = UDim2.new(0,80,0,20)
bypassBtn.Position = UDim2.new(0.5,-40,0,65)
bypassBtn.Text = "üõ°Ô∏è BYPASS"
bypassBtn.TextColor3 = colors.text
bypassBtn.Font = Enum.Font.GothamBold
bypassBtn.TextSize = 9

-- ================ FUN√á√ïES DE NAVEGA√á√ÉO ================

local function switchPage(page)
    page1.Visible = (page == 1)
    page2.Visible = (page == 2)
    page3.Visible = (page == 3)
    page4.Visible = (page == 4)
    page5.Visible = (page == 5)
    local positions = {10, 60, 110, 160, 210}
    tweenService:Create(pageIndicator, TweenInfo.new(0.2), {Position = UDim2.new(0, positions[page], 1, -4)}):Play()
    local tabs = {tab1, tab2, tab3, tab4, tab5}
    for i = 1,5 do tabs[i].TextColor3 = (i==page) and colors.accent or colors.textDim end
end

tab1.MouseButton1Click:Connect(function() switchPage(1) end)
tab2.MouseButton1Click:Connect(function() switchPage(2) end)
tab3.MouseButton1Click:Connect(function() switchPage(3) end)
tab4.MouseButton1Click:Connect(function() switchPage(4) end)
tab5.MouseButton1Click:Connect(function() switchPage(5) end)

toggleBtn.MouseButton1Click:Connect(function() hubVisible = not hubVisible; mainFrame.Visible = hubVisible end)

-- ================ ATUALIZA√á√ïES ================

local function updateWorld()
    detectCurrentWorld()
    worldNameLabel.Text = currentWorld
    worldNameLabel.TextColor3 = currentWorldColor
    worldStatusLabel.Text = inLeafWorld and "‚úÖ No Leaf World" or "‚ùå Fora"
    gems, gold = getGemsAndGold()
    gemsLabel.Text = "üíé " .. gems
    goldLabel.Text = "ü™ô " .. gold
end

local function updateStars()
    stars = findStars()
    local txt = "STARS: " .. #stars .. "\n"
    for i, s in ipairs(stars) do
        local dist = player.Character and player.Character:FindFirstChild("HumanoidRootPart") and math.floor((player.Character.HumanoidRootPart.Position - s.Position).Magnitude) .. "m" or "?"
        txt = txt .. i .. ". " .. s.Name .. " [" .. dist .. "]\n"
    end
    starsList.Text = txt
    if #stars>0 then selectedStar = stars[1] end
end

local function updateMobs()
    for _,c in ipairs(mobsScrolling:GetChildren()) do if c:IsA("TextButton") then c:Destroy() end end
    mobs = findMobs()
    for i,m in ipairs(mobs) do
        local btn = Instance.new("TextButton")
        btn.Parent = mobsScrolling
        btn.BackgroundColor3 = colors.tertiary
        btn.Size = UDim2.new(1,-10,0,20)
        btn.Position = UDim2.new(0,5,0,5+(i-1)*22)
        btn.Text = ""
        btn.AutoButtonColor = false
        local n = Instance.new("TextLabel"); n.Parent = btn; n.BackgroundTransparency=1; n.Size=UDim2.new(0,80,1,0); n.Position=UDim2.new(0,2,0,0); n.Text=m.Name; n.TextColor3=colors.text; n.Font=Enum.Font.Gotham; n.TextSize=8; n.TextXAlignment=Enum.TextXAlignment.Left
        local h = Instance.new("TextLabel"); h.Parent = btn; h.BackgroundTransparency=1; h.Size=UDim2.new(0,40,1,0); h.Position=UDim2.new(0,90,0,0); h.Text=math.floor(m.Health).."HP"; h.TextColor3=m.IsBoss and colors.warning or colors.success; h.Font=Enum.Font.Gotham; h.TextSize=8
        btn.MouseButton1Click:Connect(function()
            selectedMob = m
            selectedMobText.Text = "‚úÖ "..m.Name
            farmInfo.Text = "Mob: "..m.Name
        end)
    end
    mobsScrolling.CanvasSize = UDim2.new(0,0,0,#mobs*22+10)
end

local function updateUnits()
    for _,c in ipairs(unitsScrolling:GetChildren()) do if c:IsA("TextButton") then c:Destroy() end end
    units = findUnits()
    if #units==0 then
        local lbl = Instance.new("TextLabel"); lbl.Parent=unitsScrolling; lbl.BackgroundTransparency=1; lbl.Size=UDim2.new(1,0,0,20); lbl.Position=UDim2.new(0,0,0,5); lbl.Text="Nenhuma unit"; lbl.TextColor3=colors.textDim; lbl.Font=Enum.Font.Gotham; lbl.TextSize=8
        return
    end
    for i,u in ipairs(units) do
        local btn = Instance.new("TextButton")
        btn.Parent = unitsScrolling
        btn.BackgroundColor3 = colors.tertiary
        btn.Size = UDim2.new(1,-10,0,20)
        btn.Position = UDim2.new(0,5,0,5+(i-1)*22)
        btn.Text = ""
        local n = Instance.new("TextLabel"); n.Parent=btn; n.BackgroundTransparency=1; n.Size=UDim2.new(0,80,1,0); n.Position=UDim2.new(0,2,0,0); n.Text=u.Name; n.TextColor3=colors.text; n.Font=Enum.Font.Gotham; n.TextSize=8; n.TextXAlignment=Enum.TextXAlignment.Left
        local d = Instance.new("TextLabel"); d.Parent=btn; d.BackgroundTransparency=1; d.Size=UDim2.new(0,40,1,0); d.Position=UDim2.new(0,90,0,0); d.Text="D:"..u.Damage; d.TextColor3=colors.success; d.Font=Enum.Font.Gotham; d.TextSize=8
    end
    unitsScrolling.CanvasSize = UDim2.new(0,0,0,#units*22+10)
end

-- Conex√µes
refreshStarsBtn.MouseButton1Click:Connect(updateStars)
spinBtn.MouseButton1Click:Connect(function() if selectedStar then spinStar(selectedStar) end end)
refreshMobsBtn.MouseButton1Click:Connect(updateMobs)
refreshUnitsBtn.MouseButton1Click:Connect(updateUnits)
equipBestBtn.MouseButton1Click:Connect(equipBestUnit)
farmBtn.MouseButton1Click:Connect(function()
    if farmActive then
        stopFarming()
        farmBtn.Text = "‚ñ∂Ô∏è INICIAR"
        farmBtn.BackgroundColor3 = colors.tertiary
        farmStatus.Text = "Status: Parado"
        farmStatus.TextColor3 = colors.textDim
    else
        if not selectedMob then farmInfo.Text = "ERRO: Selecione um mob!"; return end
        startFarming()
        farmBtn.Text = "‚èπÔ∏è PARAR"
        farmBtn.BackgroundColor3 = colors.danger
        farmStatus.Text = "Status: Ativo"
        farmStatus.TextColor3 = colors.success
    end
end)
bypassBtn.MouseButton1Click:Connect(function()
    toggleBypass()
    bypassBtn.Text = bypassActive and "‚úÖ BYPASS ON" or "üõ°Ô∏è BYPASS OFF"
    bypassBtn.BackgroundColor3 = bypassActive and colors.success or colors.tertiary
end)

-- Atualiza√ß√µes autom√°ticas
task.spawn(function() while true do updateWorld(); task.wait(3) end end)
task.spawn(function() while true do if page2.Visible then updateStars() end; if page3.Visible then updateMobs() end; if page4.Visible then updateUnits() end; task.wait(3) end end)

-- Inicializa√ß√£o
updateWorld(); updateStars(); updateMobs(); updateUnits(); switchPage(1)
print("‚úÖ Stelk Hub v14.0 carregado! (200x200)")
