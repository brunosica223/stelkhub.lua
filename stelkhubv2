--[[
    STELK HUB - LEAF WORLD
    Vers√£o: 8.0 - ULTIMATE
    - Design quadrado moderno
    - Abas rol√°veis
    - Sistema de sele√ß√£o de mobs
    - Kill mob autom√°tico
    - Debug de estrelas
]]

local player = game.Players.LocalPlayer
local guiService = game:GetService("CoreGui")
local runService = game:GetService("RunService")
local tweenService = game:GetService("TweenService")
local userInputService = game:GetService("UserInputService")

-- ================ VARI√ÅVEIS ================

local bypassActive = false
local spinEnabled = false
local selectedMob = nil
local killMobConnection = nil
local currentWorld = "Desconhecido"
local inLeafWorld = false
local gems = 0
local gold = 0
local selectedStar = nil
local stars = {}
local mobs = {}

-- ================ CORES (MODERNAS) ================

local colors = {
    background = Color3.fromRGB(18, 18, 18),      -- Quase preto
    secondary = Color3.fromRGB(30, 30, 30),       -- Cinza escuro
    tertiary = Color3.fromRGB(45, 45, 45),        -- Cinza m√©dio
    accent = Color3.fromRGB(255, 255, 255),       -- Branco
    accent2 = Color3.fromRGB(220, 220, 220),      -- Cinza claro
    success = Color3.fromRGB(200, 200, 200),      -- Cinza sucesso
    danger = Color3.fromRGB(255, 100, 100),       -- Vermelho suave
    warning = Color3.fromRGB(255, 200, 100),      -- Amarelo suave
    text = Color3.fromRGB(255, 255, 255),         -- Branco
    textDim = Color3.fromRGB(180, 180, 180),      -- Cinza claro
    highlight = Color3.fromRGB(70, 70, 70)        -- Destaque
}

-- ================ DETEC√á√ÉO DE MUNDO LEAF WORLD ================

local function detectLeafWorld()
    local leafKeywords = {
        "leaf", "village", "konoha", "naruto", "hokage",
        "folha", "kakashi", "sasuke", "sakura", "chakra"
    }
    
    local found = false
    for _, obj in ipairs(workspace:GetDescendants()) do
        local name = obj.Name:lower()
        for _, kw in ipairs(leafKeywords) do
            if name:find(kw) then
                found = true
                break
            end
        end
        if found then break end
    end
    
    inLeafWorld = found
    return found and "üçÉ LEAF WORLD" or "‚ùå FORA DO LEAF WORLD", 
           found and colors.success or colors.danger
end

-- ================ DETEC√á√ÉO DE GEMS E GOLD ================

local function getGemsAndGold()
    gems = 0
    gold = 0

    if player:FindFirstChild("leaderstats") then
        for _, child in ipairs(player.leaderstats:GetChildren()) do
            local name = child.Name:lower()
            if name:find("gem") or name:find("gema") then
                gems = child.Value or 0
            elseif name:find("gold") or name:find("coin") then
                gold = child.Value or 0
            end
        end
    end

    return gems, gold
end

-- ================ SISTEMA DE STARS (COM DEBUG) ================

local function findStars()
    local found = {}
    
    -- S√≥ procura estrelas se estiver no Leaf World
    if not inLeafWorld then
        print("üîç Fora do Leaf World - n√£o procurando estrelas")
        return found
    end
    
    print("üîç Procurando Stars no Leaf World...")
    
    -- Procura por objetos com nome "Star" ou que contenham "Star"
    for _, obj in ipairs(workspace:GetDescendants()) do
        -- Verifica nome exato "Star" ou come√ßa com "Star"
        if obj.Name == "Star" or obj.Name:sub(1,4) == "Star" then
            print("‚úÖ Encontrado: " .. obj.Name .. " - " .. obj.ClassName)
            if obj:IsA("BasePart") or obj:IsA("Model") then
                table.insert(found, obj)
            end
        end
        
        -- Procura por ClickDetectors
        if obj:IsA("ClickDetector") and obj.Parent then
            if obj.Parent.Name == "Star" or obj.Parent.Name:sub(1,4) == "Star" then
                print("‚úÖ Encontrado ClickDetector em: " .. obj.Parent.Name)
                table.insert(found, obj.Parent)
            end
        end
        
        -- Limita a 6 estrelas
        if #found >= 6 then break end
    end
    
    print("üîç Total de Stars encontradas: " .. #found)
    return found
end

local function spinStar(star)
    if not star then return false end

    print("üéØ Tentando girar: " .. star.Name)

    -- Tenta diferentes m√©todos de intera√ß√£o
    local detector = star:FindFirstChildOfClass("ClickDetector")
    if detector then
        print("‚úÖ Usando ClickDetector")
        fireclickdetector(detector)
        return true
    end

    local prompt = star:FindFirstChildOfClass("ProximityPrompt")
    if prompt then
        print("‚úÖ Usando ProximityPrompt")
        prompt:InputHoldBegin()
        task.wait(0.1)
        prompt:InputHoldEnd()
        return true
    end

    -- Se tiver RemoteEvent
    for _, child in ipairs(star:GetChildren()) do
        if child:IsA("RemoteEvent") then
            print("‚úÖ Usando RemoteEvent: " .. child.Name)
            child:FireServer()
            return true
        end
    end
    
    -- Tenta toque
    if star:IsA("BasePart") and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
        print("‚úÖ Tentando TouchInterest")
        firetouchinterest(player.Character.HumanoidRootPart, star, 0)
        task.wait(0.1)
        firetouchinterest(player.Character.HumanoidRootPart, star, 1)
        return true
    end

    print("‚ùå Nenhum m√©todo funcionou para: " .. star.Name)
    return false
end

-- ================ SISTEMA DE MOBS ================

local function findMobs()
    local found = {}
    local mobKeywords = {
        "mob", "enemy", "npc", "boss", "monster",
        "ninja", "samurai", "bandit", "creep", "slime",
        "goblin", "orc", "troll", "dragon", "wolf"
    }
    
    for _, obj in ipairs(workspace:GetDescendants()) do
        if obj:IsA("Model") then
            local name = obj.Name:lower()
            for _, kw in ipairs(mobKeywords) do
                if name:find(kw) then
                    -- Verifica se tem Humanoid (√© um ser vivo)
                    if obj:FindFirstChildOfClass("Humanoid") then
                        table.insert(found, obj)
                    end
                    break
                end
            end
        end
        if #found >= 15 then break end
    end
    
    return found
end

-- ================ KILL MOB AUTOM√ÅTICO ================

local function killSelectedMob()
    if not selectedMob or not selectedMob.Parent then
        print("‚ùå Nenhum mob selecionado")
        return
    end
    
    local humanoid = selectedMob:FindFirstChildOfClass("Humanoid")
    if not humanoid then
        print("‚ùå Mob n√£o tem humanoid")
        return
    end
    
    print("‚öîÔ∏è Atacando: " .. selectedMob.Name)
    
    -- M√©todo 1: Danificar diretamente
    if humanoid.Health > 0 then
        humanoid.Health = 0
        print("‚úÖ Mob morto!")
        return
    end
    
    -- M√©todo 2: Remover
    if selectedMob:FindFirstChild("HumanoidRootPart") then
        selectedMob.HumanoidRootPart:Destroy()
        print("‚úÖ Mob removido!")
    end
end

-- ================ BYPASS ================

local function toggleBypass()
    if bypassActive then
        bypassActive = false
        return
    end

    bypassActive = true

    pcall(function()
        local mt = getrawmetatable and getrawmetatable(game) or getmetatable(game)
        if mt then
            local oldNamecall = mt.__namecall
            setreadonly(mt, false)

            mt.__namecall = newcclosure(function(self, ...)
                local method = getnamecallmethod()
                if method == "FireServer" then
                    local remoteName = tostring(self):lower()
                    if remoteName:find("anticheat") then
                        return
                    end
                end
                return oldNamecall(self, ...)
            end)
            setreadonly(mt, true)
        end
    end)
end

-- ================ CRIAR GUI (DESIGN QUADRADO) ================

local screenGui = Instance.new("ScreenGui")
screenGui.Name = "StelkHub"
screenGui.Parent = player:WaitForChild("PlayerGui")
screenGui.ResetOnSpawn = false
screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling

-- Frame principal (quadrado)
local mainFrame = Instance.new("Frame")
mainFrame.Parent = screenGui
mainFrame.BackgroundColor3 = colors.background
mainFrame.BorderSizePixel = 0
mainFrame.Size = UDim2.new(0, 400, 0, 520)  -- Mais quadrado
mainFrame.Position = UDim2.new(0.5, -200, 0.5, -260)
mainFrame.Active = true
mainFrame.Draggable = true
mainFrame.BackgroundTransparency = 0

-- Borda fina
local mainBorder = Instance.new("Frame")
mainBorder.Parent = mainFrame
mainBorder.BackgroundColor3 = colors.tertiary
mainBorder.Size = UDim2.new(1, 0, 1, 0)
mainBorder.BackgroundTransparency = 0.5
mainBorder.BorderSizePixel = 0

-- Top Bar (menor)
local topBar = Instance.new("Frame")
topBar.Parent = mainFrame
topBar.BackgroundColor3 = colors.secondary
topBar.Size = UDim2.new(1, 0, 0, 45)
topBar.BorderSizePixel = 0

-- T√≠tulo
local title = Instance.new("TextLabel")
title.Parent = topBar
title.BackgroundTransparency = 1
title.Size = UDim2.new(0, 200, 1, 0)
title.Position = UDim2.new(0, 15, 0, 0)
title.Text = "STELK HUB"
title.TextColor3 = colors.accent
title.Font = Enum.Font.GothamBold
title.TextSize = 22
title.TextXAlignment = Enum.TextXAlignment.Left

-- Bot√£o fechar
local closeBtn = Instance.new("TextButton")
closeBtn.Parent = topBar
closeBtn.BackgroundColor3 = colors.tertiary
closeBtn.Size = UDim2.new(0, 28, 0, 28)
closeBtn.Position = UDim2.new(1, -38, 0.5, -14)
closeBtn.Text = "‚úï"
closeBtn.TextColor3 = colors.text
closeBtn.Font = Enum.Font.GothamBold
closeBtn.TextSize = 16

-- ABAS ROL√ÅVEIS
local tabContainer = Instance.new("Frame")
tabContainer.Parent = mainFrame
tabContainer.BackgroundColor3 = colors.secondary
tabContainer.Size = UDim2.new(1, 0, 0, 45)
tabContainer.Position = UDim2.new(0, 0, 0, 45)
tabContainer.ClipsDescendants = true

local tabScrolling = Instance.new("ScrollingFrame")
tabScrolling.Parent = tabContainer
tabScrolling.BackgroundTransparency = 1
tabScrolling.Size = UDim2.new(1, 0, 1, 0)
tabScrolling.CanvasSize = UDim2.new(2, 0, 0, 0)  -- Largo o suficiente para rolar
tabScrolling.ScrollBarThickness = 0
tabScrolling.BorderSizePixel = 0

-- Abas dentro do ScrollingFrame
local function createTab(name, pos)
    local btn = Instance.new("TextButton")
    btn.Parent = tabScrolling
    btn.BackgroundColor3 = colors.background
    btn.Size = UDim2.new(0, 80, 0, 35)
    btn.Position = UDim2.new(0, pos, 0.5, -17.5)
    btn.Text = name
    btn.TextColor3 = colors.textDim
    btn.Font = Enum.Font.GothamBold
    btn.TextSize = 14
    btn.AutoButtonColor = false
    btn.BorderSizePixel = 0
    
    return btn
end

local tab1 = createTab("MUNDO", 10)
local tab2 = createTab("STARS", 100)
local tab3 = createTab("MOBS", 190)
local tab4 = createTab("BYPASS", 280)
local tab5 = createTab("SOBRE", 370)

-- Indicador de p√°gina
local pageIndicator = Instance.new("Frame")
pageIndicator.Parent = tabScrolling
pageIndicator.BackgroundColor3 = colors.accent
pageIndicator.Size = UDim2.new(0, 60, 0, 2)
pageIndicator.Position = UDim2.new(0, 20, 1, -7)
pageIndicator.BorderSizePixel = 0

-- Conte√∫do
local content = Instance.new("Frame")
content.Parent = mainFrame
content.BackgroundColor3 = colors.background
content.Size = UDim2.new(1, 0, 1, -90)
content.Position = UDim2.new(0, 0, 0, 90)
content.BorderSizePixel = 0
content.ClipsDescendants = true

-- ================ P√ÅGINA 1: MUNDO ================

local page1 = Instance.new("Frame")
page1.Parent = content
page1.BackgroundTransparency = 1
page1.Size = UDim2.new(1, 0, 1, 0)
page1.Visible = true

-- Card do Mundo
local worldCard = Instance.new("Frame")
worldCard.Parent = page1
worldCard.BackgroundColor3 = colors.secondary
worldCard.Size = UDim2.new(0, 360, 0, 80)
worldCard.Position = UDim2.new(0.5, -180, 0, 20)

local worldIcon = Instance.new("TextLabel")
worldIcon.Parent = worldCard
worldIcon.BackgroundTransparency = 1
worldIcon.Size = UDim2.new(0, 40, 1, 0)
worldIcon.Position = UDim2.new(0, 15, 0, 0)
worldIcon.Text = "üçÉ"
worldIcon.TextColor3 = colors.accent
worldIcon.Font = Enum.Font.GothamBold
worldIcon.TextSize = 30

local worldName = Instance.new("TextLabel")
worldName.Parent = worldCard
worldName.BackgroundTransparency = 1
worldName.Size = UDim2.new(0, 250, 0, 25)
worldName.Position = UDim2.new(0, 65, 0, 15)
worldName.Text = "Detectando..."
worldName.TextColor3 = colors.accent
worldName.Font = Enum.Font.GothamBold
worldName.TextSize = 16
worldName.TextXAlignment = Enum.TextXAlignment.Left

local worldStatus = Instance.new("TextLabel")
worldStatus.Parent = worldCard
worldStatus.BackgroundTransparency = 1
worldStatus.Size = UDim2.new(0, 250, 0, 20)
worldStatus.Position = UDim2.new(0, 65, 0, 45)
worldStatus.Text = "Aguardando detec√ß√£o..."
worldStatus.TextColor3 = colors.textDim
worldStatus.Font = Enum.Font.Gotham
worldStatus.TextSize = 12
worldStatus.TextXAlignment = Enum.TextXAlignment.Left

-- Card de Recursos
local resourcesCard = Instance.new("Frame")
resourcesCard.Parent = page1
resourcesCard.BackgroundColor3 = colors.secondary
resourcesCard.Size = UDim2.new(0, 360, 0, 70)
resourcesCard.Position = UDim2.new(0.5, -180, 0, 115)

-- Gems
local gemsFrame = Instance.new("Frame")
gemsFrame.Parent = resourcesCard
gemsFrame.BackgroundColor3 = colors.tertiary
gemsFrame.Size = UDim2.new(0, 160, 0, 45)
gemsFrame.Position = UDim2.new(0, 15, 0.5, -22.5)

local gemsIcon = Instance.new("TextLabel")
gemsIcon.Parent = gemsFrame
gemsIcon.BackgroundTransparency = 1
gemsIcon.Size = UDim2.new(0, 30, 1, 0)
gemsIcon.Position = UDim2.new(0, 8, 0, 0)
gemsIcon.Text = "üíé"
gemsIcon.TextColor3 = colors.accent
gemsIcon.Font = Enum.Font.GothamBold
gemsIcon.TextSize = 18

local gemsValue = Instance.new("TextLabel")
gemsValue.Parent = gemsFrame
gemsValue.BackgroundTransparency = 1
gemsValue.Size = UDim2.new(0, 100, 0, 25)
gemsValue.Position = UDim2.new(0, 45, 0.5, -12.5)
gemsValue.Text = "0"
gemsValue.TextColor3 = colors.accent
gemsValue.Font = Enum.Font.GothamBold
gemsValue.TextSize = 16
gemsValue.TextXAlignment = Enum.TextXAlignment.Left

-- Gold
local goldFrame = Instance.new("Frame")
goldFrame.Parent = resourcesCard
goldFrame.BackgroundColor3 = colors.tertiary
goldFrame.Size = UDim2.new(0, 160, 0, 45)
goldFrame.Position = UDim2.new(1, -175, 0.5, -22.5)

local goldIcon = Instance.new("TextLabel")
goldIcon.Parent = goldFrame
goldIcon.BackgroundTransparency = 1
goldIcon.Size = UDim2.new(0, 30, 1, 0)
goldIcon.Position = UDim2.new(0, 8, 0, 0)
goldIcon.Text = "ü™ô"
goldIcon.TextColor3 = colors.accent
goldIcon.Font = Enum.Font.GothamBold
goldIcon.TextSize = 18

local goldValue = Instance.new("TextLabel")
goldValue.Parent = goldFrame
goldValue.BackgroundTransparency = 1
goldValue.Size = UDim2.new(0, 100, 0, 25)
goldValue.Position = UDim2.new(0, 45, 0.5, -12.5)
goldValue.Text = "0"
goldValue.TextColor3 = colors.accent
goldValue.Font = Enum.Font.GothamBold
goldValue.TextSize = 16
goldValue.TextXAlignment = Enum.TextXAlignment.Left

-- Aviso
local worldWarning = Instance.new("TextLabel")
worldWarning.Parent = page1
worldWarning.BackgroundTransparency = 1
worldWarning.Size = UDim2.new(0, 360, 0, 20)
worldWarning.Position = UDim2.new(0.5, -180, 0, 200)
worldWarning.Text = "‚≠ê Estrelas dispon√≠veis apenas no Leaf World"
worldWarning.TextColor3 = colors.textDim
worldWarning.Font = Enum.Font.Gotham
worldWarning.TextSize = 11

-- ================ P√ÅGINA 2: STARS (COM DEBUG) ================

local page2 = Instance.new("Frame")
page2.Parent = content
page2.BackgroundTransparency = 1
page2.Size = UDim2.new(1, 0, 1, 0)
page2.Visible = false

local starsTitle = Instance.new("TextLabel")
starsTitle.Parent = page2
starsTitle.BackgroundTransparency = 1
starsTitle.Size = UDim2.new(1, -20, 0, 30)
starsTitle.Position = UDim2.new(0, 10, 0, 10)
starsTitle.Text = "‚≠ê SISTEMA DE STARS"
starsTitle.TextColor3 = colors.accent
starsTitle.Font = Enum.Font.GothamBold
starsTitle.TextSize = 18
starsTitle.TextXAlignment = Enum.TextXAlignment.Left

-- Status do mundo
local worldStatusStars = Instance.new("TextLabel")
worldStatusStars.Parent = page2
worldStatusStars.BackgroundTransparency = 1
worldStatusStars.Size = UDim2.new(1, -20, 0, 20)
worldStatusStars.Position = UDim2.new(0, 10, 0, 45)
worldStatusStars.Text = "Verificando mundo..."
worldStatusStars.TextColor3 = colors.textDim
worldStatusStars.Font = Enum.Font.Gotham
worldStatusStars.TextSize = 11
worldStatusStars.TextXAlignment = Enum.TextXAlignment.Left

-- Bot√£o Debug
local debugBtn = Instance.new("TextButton")
debugBtn.Parent = page2
debugBtn.BackgroundColor3 = colors.tertiary
debugBtn.Size = UDim2.new(0, 80, 0, 25)
debugBtn.Position = UDim2.new(1, -90, 0, 10)
debugBtn.Text = "DEBUG"
debugBtn.TextColor3 = colors.text
debugBtn.Font = Enum.Font.GothamBold
debugBtn.TextSize = 10

-- Lista de Stars
local starsList = Instance.new("TextLabel")
starsList.Parent = page2
starsList.BackgroundColor3 = colors.secondary
starsList.Size = UDim2.new(0, 360, 0, 140)
starsList.Position = UDim2.new(0.5, -180, 0, 75)
starsList.Text = "Aguardando detec√ß√£o...\n\nEntre no Leaf World para ver as Stars"
starsList.TextColor3 = colors.textDim
starsList.Font = Enum.Font.Gotham
starsList.TextSize = 12
starsList.TextWrapped = true
starsList.TextXAlignment = Enum.TextXAlignment.Left
starsList.TextYAlignment = Enum.TextYAlignment.Top

-- Bot√µes
local refreshStarsBtn = Instance.new("TextButton")
refreshStarsBtn.Parent = page2
refreshStarsBtn.BackgroundColor3 = colors.tertiary
refreshStarsBtn.Size = UDim2.new(0, 110, 0, 32)
refreshStarsBtn.Position = UDim2.new(0.5, -170, 0, 225)
refreshStarsBtn.Text = "üîÑ ATUALIZAR"
refreshStarsBtn.TextColor3 = colors.text
refreshStarsBtn.Font = Enum.Font.GothamBold
refreshStarsBtn.TextSize = 11

local spinStarBtn = Instance.new("TextButton")
spinStarBtn.Parent = page2
spinStarBtn.BackgroundColor3 = colors.tertiary
spinStarBtn.Size = UDim2.new(0, 110, 0, 32)
spinStarBtn.Position = UDim2.new(0.5, -55, 0, 225)
spinStarBtn.Text = "üéØ GIRAR #1"
spinStarBtn.TextColor3 = colors.text
spinStarBtn.Font = Enum.Font.GothamBold
spinStarBtn.TextSize = 11

local autoSpinBtn = Instance.new("TextButton")
autoSpinBtn.Parent = page2
autoSpinBtn.BackgroundColor3 = colors.tertiary
autoSpinBtn.Size = UDim2.new(0, 110, 0, 32)
autoSpinBtn.Position = UDim2.new(0.5, 60, 0, 225)
autoSpinBtn.Text = "‚ö° AUTO SPIN"
autoSpinBtn.TextColor3 = colors.text
autoSpinBtn.Font = Enum.Font.GothamBold
autoSpinBtn.TextSize = 11

local starInfo = Instance.new("TextLabel")
starInfo.Parent = page2
starInfo.BackgroundColor3 = colors.secondary
starInfo.Size = UDim2.new(0, 360, 0, 35)
starInfo.Position = UDim2.new(0.5, -180, 0, 270)
starInfo.Text = "Selecione uma Star para girar"
starInfo.TextColor3 = colors.textDim
starInfo.Font = Enum.Font.Gotham
starInfo.TextSize = 11

-- ================ P√ÅGINA 3: MOBS COM SELE√á√ÉO ================

local page3 = Instance.new("Frame")
page3.Parent = content
page3.BackgroundTransparency = 1
page3.Size = UDim2.new(1, 0, 1, 0)
page3.Visible = false

local mobsTitle = Instance.new("TextLabel")
mobsTitle.Parent = page3
mobsTitle.BackgroundTransparency = 1
mobsTitle.Size = UDim2.new(1, -20, 0, 30)
mobsTitle.Position = UDim2.new(0, 10, 0, 10)
mobsTitle.Text = "üëæ SELE√á√ÉO DE MOBS"
mobsTitle.TextColor3 = colors.accent
mobsTitle.Font = Enum.Font.GothamBold
mobsTitle.TextSize = 18
mobsTitle.TextXAlignment = Enum.TextXAlignment.Left

-- Lista de Mobs (clic√°vel)
local mobsList = Instance.new("TextButton")
mobsList.Parent = page3
mobsList.BackgroundColor3 = colors.secondary
mobsList.Size = UDim2.new(0, 360, 0, 160)
mobsList.Position = UDim2.new(0.5, -180, 0, 50)
mobsList.Text = ""
mobsList.AutoButtonColor = false

-- Dentro do bot√£o, um TextLabel para o texto
local mobsListText = Instance.new("TextLabel")
mobsListText.Parent = mobsList
mobsListText.BackgroundTransparency = 1
mobsListText.Size = UDim2.new(1, -20, 1, 0)
mobsListText.Position = UDim2.new(0, 10, 0, 0)
mobsListText.Text = "Clique em um mob para selecionar\n\nProcurando mobs..."
mobsListText.TextColor3 = colors.textDim
mobsListText.Font = Enum.Font.Gotham
mobsListText.TextSize = 12
mobsListText.TextWrapped = true
mobsListText.TextXAlignment = Enum.TextXAlignment.Left
mobsListText.TextYAlignment = Enum.TextYAlignment.Top

-- Mob selecionado
local selectedMobFrame = Instance.new("Frame")
selectedMobFrame.Parent = page3
selectedMobFrame.BackgroundColor3 = colors.tertiary
selectedMobFrame.Size = UDim2.new(0, 360, 0, 45)
selectedMobFrame.Position = UDim2.new(0.5, -180, 0, 220)

local selectedMobText = Instance.new("TextLabel")
selectedMobText.Parent = selectedMobFrame
selectedMobText.BackgroundTransparency = 1
selectedMobText.Size = UDim2.new(1, -10, 1, 0)
selectedMobText.Position = UDim2.new(0, 10, 0, 0)
selectedMobText.Text = "Nenhum mob selecionado"
selectedMobText.TextColor3 = colors.textDim
selectedMobText.Font = Enum.Font.Gotham
selectedMobText.TextSize = 12
selectedMobText.TextXAlignment = Enum.TextXAlignment.Left

-- Bot√£o KILL MOB
local killMobBtn = Instance.new("TextButton")
killMobBtn.Parent = page3
killMobBtn.BackgroundColor3 = colors.danger
killMobBtn.Size = UDim2.new(0, 200, 0, 45)
killMobBtn.Position = UDim2.new(0.5, -100, 0, 280)
killMobBtn.Text = "üíÄ KILL MOB"
killMobBtn.TextColor3 = colors.text
killMobBtn.Font = Enum.Font.GothamBold
killMobBtn.TextSize = 14

-- Bot√£o atualizar mobs
local refreshMobsBtn = Instance.new("TextButton")
refreshMobsBtn.Parent = page3
refreshMobsBtn.BackgroundColor3 = colors.tertiary
refreshMobsBtn.Size = UDim2.new(0, 150, 0, 30)
refreshMobsBtn.Position = UDim2.new(0.5, -75, 0, 340)
refreshMobsBtn.Text = "üîÑ ATUALIZAR MOBS"
refreshMobsBtn.TextColor3 = colors.text
refreshMobsBtn.Font = Enum.Font.GothamBold
refreshMobsBtn.TextSize = 10

-- ================ P√ÅGINA 4: BYPASS ================

local page4 = Instance.new("Frame")
page4.Parent = content
page4.BackgroundTransparency = 1
page4.Size = UDim2.new(1, 0, 1, 0)
page4.Visible = false

local bypassTitle = Instance.new("TextLabel")
bypassTitle.Parent = page4
bypassTitle.BackgroundTransparency = 1
bypassTitle.Size = UDim2.new(1, -20, 0, 30)
bypassTitle.Position = UDim2.new(0, 10, 0, 10)
bypassTitle.Text = "üõ°Ô∏è BYPASS"
bypassTitle.TextColor3 = colors.accent
bypassTitle.Font = Enum.Font.GothamBold
bypassTitle.TextSize = 18
bypassTitle.TextXAlignment = Enum.TextXAlignment.Left

local bypassCard = Instance.new("Frame")
bypassCard.Parent = page4
bypassCard.BackgroundColor3 = colors.secondary
bypassCard.Size = UDim2.new(0, 360, 0, 130)
bypassCard.Position = UDim2.new(0.5, -180, 0, 50)

local bypassInfo = Instance.new("TextLabel")
bypassInfo.Parent = bypassCard
bypassInfo.BackgroundTransparency = 1
bypassInfo.Size = UDim2.new(1, -20, 0, 70)
bypassInfo.Position = UDim2.new(0, 10, 0, 10)
bypassInfo.Text = "‚úì Bloqueia detec√ß√£o de anti-cheat\n‚úì Prote√ß√£o contra kick\n‚úì Desativa remotes suspeitos"
bypassInfo.TextColor3 = colors.textDim
bypassInfo.Font = Enum.Font.Gotham
bypassInfo.TextSize = 12
bypassInfo.TextXAlignment = Enum.TextXAlignment.Left

local bypassToggleBtn = Instance.new("TextButton")
bypassToggleBtn.Parent = bypassCard
bypassToggleBtn.BackgroundColor3 = colors.tertiary
bypassToggleBtn.Size = UDim2.new(0, 150, 0, 35)
bypassToggleBtn.Position = UDim2.new(0.5, -75, 0, 90)
bypassToggleBtn.Text = "ATIVAR BYPASS"
bypassToggleBtn.TextColor3 = colors.text
bypassToggleBtn.Font = Enum.Font.GothamBold
bypassToggleBtn.TextSize = 11

local bypassStatus = Instance.new("TextLabel")
bypassStatus.Parent = page4
bypassStatus.BackgroundColor3 = colors.tertiary
bypassStatus.Size = UDim2.new(0, 300, 0, 25)
bypassStatus.Position = UDim2.new(0.5, -150, 0, 200)
bypassStatus.Text = "Status: Inativo"
bypassStatus.TextColor3 = colors.textDim
bypassStatus.Font = Enum.Font.Gotham
bypassStatus.TextSize = 11

-- ================ P√ÅGINA 5: SOBRE ================

local page5 = Instance.new("Frame")
page5.Parent = content
page5.BackgroundTransparency = 1
page5.Size = UDim2.new(1, 0, 1, 0)
page5.Visible = false

local aboutTitle = Instance.new("TextLabel")
aboutTitle.Parent = page5
aboutTitle.BackgroundTransparency = 1
aboutTitle.Size = UDim2.new(1, -20, 0, 30)
aboutTitle.Position = UDim2.new(0, 10, 0, 10)
aboutTitle.Text = "üëë SOBRE"
aboutTitle.TextColor3 = colors.accent
aboutTitle.Font = Enum.Font.GothamBold
aboutTitle.TextSize = 18
aboutTitle.TextXAlignment = Enum.TextXAlignment.Left

local aboutCard = Instance.new("Frame")
aboutCard.Parent = page5
aboutCard.BackgroundColor3 = colors.secondary
aboutCard.Size = UDim2.new(0, 360, 0, 200)
aboutCard.Position = UDim2.new(0.5, -180, 0, 50)

local aboutText = Instance.new("TextLabel")
aboutText.Parent = aboutCard
aboutText.BackgroundTransparency = 1
aboutText.Size = UDim2.new(1, -20, 0, 100)
aboutText.Position = UDim2.new(0, 10, 0, 10)
aboutText.Text = "STELK HUB\nVers√£o 8.0 - Ultimate Edition\n\nCriado por Stelk\nFevereiro 2026"
aboutText.TextColor3 = colors.textDim
aboutText.Font = Enum.Font.Gotham
aboutText.TextSize = 13
aboutText.TextXAlignment = Enum.TextXAlignment.Left

local discordText = Instance.new("TextLabel")
discordText.Parent = aboutCard
discordText.BackgroundTransparency = 1
discordText.Size = UDim2.new(1, 0, 0, 30)
discordText.Position = UDim2.new(0, 0, 0, 140)
discordText.Text = "üì± Discord: stelk_dev"
discordText.TextColor3 = colors.textDim
discordText.Font = Enum.Font.Gotham
discordText.TextSize = 12

-- ================ FUN√á√ïES DE NAVEGA√á√ÉO ROL√ÅVEL ================

local function switchPage(page)
    page1.Visible = (page == 1)
    page2.Visible = (page == 2)
    page3.Visible = (page == 3)
    page4.Visible = (page == 4)
    page5.Visible = (page == 5)

    local positions = {20, 110, 200, 290, 380}
    tweenService:Create(pageIndicator, TweenInfo.new(0.3), {
        Position = UDim2.new(0, positions[page], 1, -7)
    }):Play()

    local tabs = {tab1, tab2, tab3, tab4, tab5}
    for i = 1, 5 do
        if i == page then
            tabs[i].TextColor3 = colors.accent
        else
            tabs[i].TextColor3 = colors.textDim
        end
    end
end

tab1.MouseButton1Click:Connect(function() switchPage(1) end)
tab2.MouseButton1Click:Connect(function() switchPage(2) end)
tab3.MouseButton1Click:Connect(function() switchPage(3) end)
tab4.MouseButton1Click:Connect(function() switchPage(4) end)
tab5.MouseButton1Click:Connect(function() switchPage(5) end)

-- ================ FUN√á√ïES DOS BOT√ïES ================

local function updateWorldInfo()
    local world, color = detectLeafWorld()
    worldName.Text = world
    worldName.TextColor3 = color
    
    if inLeafWorld then
        worldStatus.Text = "‚úÖ Voc√™ est√° no Leaf World"
        worldStatus.TextColor3 = colors.success
    else
        worldStatus.Text = "‚ùå Fora do Leaf World - Estrelas indispon√≠veis"
        worldStatus.TextColor3 = colors.danger
    end
    
    gems, gold = getGemsAndGold()
    gemsValue.Text = tostring(gems)
    goldValue.Text = tostring(gold)
    
    if inLeafWorld then
        worldStatusStars.Text = "‚úÖ Leaf World detectado - Estrelas dispon√≠veis"
        worldStatusStars.TextColor3 = colors.success
    else
        worldStatusStars.Text = "‚ùå Fora do Leaf World - Entre no Leaf World"
        worldStatusStars.TextColor3 = colors.danger
    end
end

local function updateStarsList()
    if not inLeafWorld then
        starsList.Text = "üö´ FORA DO LEAF WORLD\n\nEntre no Leaf World para ver as Stars dispon√≠veis"
        return
    end
    
    stars = findStars()
    local text = "STARS ENCONTRADAS: " .. #stars .. "/6\n\n"
    
    if #stars == 0 then
        text = text .. "Nenhuma Star encontrada.\n\nDebug:\n- Verifique se est√° no Leaf World\n- Use o bot√£o DEBUG\n- Procure por objetos 'Star'"
    else
        for i, star in ipairs(stars) do
            local dist = "?"
            if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                local root = player.Character.HumanoidRootPart
                dist = math.floor((root.Position - star.Position).Magnitude) .. "m"
            end
            text = text .. i .. ". " .. star.Name .. " [" .. dist .. "]\n"
        end
        selectedStar = stars[1]
        spinStarBtn.Text = "üéØ GIRAR " .. stars[1].Name
        starInfo.Text = "Selecionada: " .. stars[1].Name
    end
    
    starsList.Text = text
end

local function updateMobsList()
    mobs = findMobs()
    local text = "MOBS PR√ìXIMOS: " .. #mobs .. "\n\n"
    
    if #mobs == 0 then
        text = text .. "Nenhum mob encontrado."
    else
        for i, mob in ipairs(mobs) do
            local dist = "?"
            if player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
                local root = player.Character.HumanoidRootPart
                if mob:FindFirstChild("HumanoidRootPart") then
                    local mobRoot = mob:FindFirstChild("HumanoidRootPart")
                    dist = math.floor((root.Position - mobRoot.Position).Magnitude) .. "m"
                end
            end
            local health = "?"
            if mob:FindFirstChildOfClass("Humanoid") then
                health = math.floor(mob:FindFirstChildOfClass("Humanoid").Health) .. " HP"
            end
            text = text .. i .. ". " .. mob.Name .. " [" .. dist .. "] " .. health .. "\n"
        end
    end
    
    mobsListText.Text = text
end

-- Sele√ß√£o de mob (clicar na lista)
mobsList.MouseButton1Click:Connect(function(x, y)
    local relativeY = y - mobsList.AbsolutePosition.Y
    local line = math.floor(relativeY / 20) + 1
    
    if line <= #mobs then
        selectedMob = mobs[line]
        local health = selectedMob:FindFirstChildOfClass("Humanoid") and 
                       selectedMob:FindFirstChildOfClass("Humanoid").Health or 0
        selectedMobText.Text = "‚úÖ Selecionado: " .. selectedMob.Name .. " [" .. math.floor(health) .. " HP]"
        selectedMobText.TextColor3 = colors.success
    end
end)

-- Bot√µes
refreshStarsBtn.MouseButton1Click:Connect(updateStarsList)
refreshMobsBtn.MouseButton1Click:Connect(updateMobsList)

-- Debug button
debugBtn.MouseButton1Click:Connect(function()
    print("üîç DEBUG MODE")
    print("üìç In Leaf World: " .. tostring(inLeafWorld))
    print("üìç World: " .. tostring(currentWorld))
    
    -- Listar todos os objetos com "Star"
    print("üìã Procurando objetos 'Star':")
    for _, obj in ipairs(workspace:GetDescendants()) do
        if obj.Name:find("Star") then
            print("   - " .. obj.Name .. " (" .. obj.ClassName .. ")")
        end
    end
end)

spinStarBtn.MouseButton1Click:Connect(function()
    if not inLeafWorld then
        starsList.Text = "üö´ FORA DO LEAF WORLD\n\nN√£o √© poss√≠vel girar Stars fora do Leaf World"
        return
    end
    
    if selectedStar and selectedStar.Parent then
        if spinStar(selectedStar) then
            starsList.Text = "‚úÖ GIRADO: " .. selectedStar.Name .. "\n\n" .. starsList.Text
            spinStarBtn.BackgroundColor3 = colors.success
            task.wait(0.3)
            spinStarBtn.BackgroundColor3 = colors.tertiary
        else
            starsList.Text = "‚ùå FALHOU: " .. selectedStar.Name .. "\n\n" .. starsList.Text
            spinStarBtn.BackgroundColor3 = colors.danger
            task.wait(0.3)
            spinStarBtn.BackgroundColor3 = colors.tertiary
        end
    else
        updateStarsList()
    end
end)

autoSpinBtn.MouseButton1Click:Connect(function()
    if not inLeafWorld then
        starsList.Text = "üö´ FORA DO LEAF WORLD\n\nAuto Spin s√≥ funciona no Leaf World"
        return
    end
    
    spinEnabled = not spinEnabled
    if spinEnabled then
        autoSpinBtn.Text = "‚èπÔ∏è PARAR SPIN"
        autoSpinBtn.BackgroundColor3 = colors.danger

        task.spawn(function()
            while spinEnabled do
                if not inLeafWorld then
                    spinEnabled = false
                    autoSpinBtn.Text = "‚ö° AUTO SPIN"
                    autoSpinBtn.BackgroundColor3 = colors.tertiary
                    break
                end
                
                local currentStars = findStars()
                for _, star in ipairs(currentStars) do
                    spinStar(star)
                    task.wait(0.3)
                end
                task.wait(0.5)
            end
        end)
    else
        autoSpinBtn.Text = "‚ö° AUTO SPIN"
        autoSpinBtn.BackgroundColor3 = colors.tertiary
    end
end)

-- KILL MOB
killMobBtn.MouseButton1Click:Connect(function()
    if selectedMob and selectedMob.Parent then
        killSelectedMob()
    else
        selectedMobText.Text = "‚ùå Nenhum mob selecionado"
        selectedMobText.TextColor3 = colors.danger
    end
end)

-- Bypass
bypassToggleBtn.MouseButton1Click:Connect(function()
    toggleBypass()
    if bypassActive then
        bypassToggleBtn.Text = "BYPASS ATIVO"
        bypassToggleBtn.BackgroundColor3 = colors.success
        bypassStatus.Text = "Status: Ativo - Protegido"
        bypassStatus.TextColor3 = colors.success
    else
        bypassToggleBtn.Text = "ATIVAR BYPASS"
        bypassToggleBtn.BackgroundColor3 = colors.tertiary
        bypassStatus.Text = "Status: Inativo"
        bypassStatus.TextColor3 = colors.textDim
    end
end)

-- Fechar
closeBtn.MouseButton1Click:Connect(function()
    screenGui:Destroy()
end)

-- Atualiza√ß√µes autom√°ticas
task.spawn(function()
    while true do
        updateWorldInfo()
        if page2.Visible and inLeafWorld then
            updateStarsList()
        end
        task.wait(2)
    end
end)

task.spawn(function()
    while true do
        if page3.Visible then
            updateMobsList()
        end
        task.wait(3)
    end
end)

-- Inicializa√ß√£o
updateWorldInfo()
updateStarsList()
updateMobsList()
switchPage(1)

print("‚úÖ Stelk Hub v8.0 - Ultimate Edition carregado!")
print("üìå Abas rol√°veis | Sele√ß√£o de mobs | Kill mob autom√°tico")
